# 063.1 Публикуем сайт в интернете. Домен. Хостинг. Сброс "кеша"

### 1. Публикация сайта в интернете

- Для публикации сайта можно использовать различные платформы, такие как GitHub Pages, Netlify, Vercel и другие.
- GitHub Pages позволяет размещать статические сайты прямо из репозитория GitHub.

### 2. Домен

- Доменное имя — это адрес вашего сайта в интернете.
- Можно использовать бесплатные домены (например, `username.github.io`) или приобрести собственный домен у регистратора.

### 3. Хостинг

- Хостинг предоставляет серверное пространство для размещения вашего сайта.
- Для статических сайтов можно использовать бесплатные хостинги, такие как GitHub Pages.
- Для динамических сайтов потребуется платный хостинг с поддержкой серверных технологий.

### 4. Сброс кеша

- **Почему браузеры кешируют файлы?**
  Браузеры сохраняют файлы (например, CSS, JS, изображения) в локальном кеше для ускорения загрузки сайта при повторных посещениях. Однако это может привести к тому, что пользователи видят устаревшую версию сайта.

- **Как работает очистка кеша через версии?**
  Очистка кеша через версии заключается в изменении имени файла или добавлении уникального идентификатора (хэша) к имени файла. Это заставляет браузер загружать новую версию файла, так как он считает его новым ресурсом.

- **Примеры реализации:**

  1. **Добавление хэша к имени файла:**
     Вместо `style.css` используйте `style.abc123.css`, где `abc123` — это хэш, генерируемый на основе содержимого файла.
  2. **Использование query-параметров:**
     Вместо `script.js` используйте `script.js?v=1.0.1`. При изменении версии файла обновите параметр `v`.

- **Автоматизация процесса:**

  - В сборщиках, таких как Webpack, Parcel или Gulp, можно настроить автоматическую генерацию хэшей для файлов. Например, Webpack добавляет хэш в имя файла при сборке:
    ```javascript
    output: {
      filename: '[name].[contenthash].js',
    }
    ```
  - Это упрощает управление версиями и предотвращает конфликты кеша.

- **Настройка HTTP-заголовков:**

  - Используйте заголовки `Cache-Control` и `ETag` для управления кешированием. Например:

    ```http
    Cache-Control: no-cache
    ```

    Это указывает браузеру проверять наличие обновлений перед использованием кеша.

- **[Как очистить кэш браузера, каждый раз, когда развертывается новая версия веб-приложения?][2]**

  - Вы можете сказать браузеру, чтобы он никогда не кэшировал вашу страницу ([читайте эту документацию](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control)). Например:

  ```html
  <meta http-equiv="cache-control" content="no-cache" />
  <meta http-equiv="expires" content="0" />
  <meta http-equiv="pragma" content="no-cache" />
  ```

  Или измените ссылки на файлы, связав имя хеш-тега во всех ваших файлах (javascript, изображения, шрифты, ...) и измените этот хэш каждый раз, когда вы развертываете новую версию своего программного обеспечения, как это:

  ```html
  <script src="script.js?version={versionNumber}">
  <img src ="imageName.png=version={versionNumber}">
  ```

- **Рекомендации:**

  - Всегда используйте версионирование для файлов, которые часто обновляются.
  - Настройте автоматизацию в процессе сборки проекта, чтобы избежать ручного изменения имен файлов.

<hr>

## Ресурсы:

- [Документация GH Pages (они до сих пор её не обновили)][1]
  - [Документация по GitHub Pages][3]
- [Очистка кеша через версии][2]

[1]: https://pages.github.com/
[2]: https://stackoverflow.com/questions/57993791/how-to-clean-the-browser-cache-each-time-a-new-version-of-the-web-application-i

[3]: [https://docs.github.com/ru/pages]
