# 040. Псевдоклассы и псевдоэлементы в CSS

## [Псевдоклассы:][1]

|              |                |                     |                    |
| ------------ | -------------- | ------------------- | ------------------ |
| :any-link    | :first-of-type | :last-of-type       | :paused            |
| :active      | :focus         | :local-link         | :placeholder-shown |
| :autofill    | :focus-visible | :link               | :playing           |
| :blank       | :focus-within  | :muted              | :read-only         |
| :buffering   | :fullscreen    | :not()              | :read-write        |
| :checked     | :has           | :nth-child()        | :required          |
| :default     | :hover         | :nth-last-child()   | :root              |
| :defined     | :in-range      | :nth-last-of-type() | :seeking           |
| :disabled    | :indeterminate | :nth-of-type()      | :stalled           |
| :dir()       | :invalid       | :only-child         | :target            |
| :empty       | :is()          | :only-of-type       | :valid             |
| :enabled     | :lang()        | :optional           | :visited           |
| :first-child | :last-child    | :out-of-range       | :volume-locked     |

## [Псевдоэлементы:](https://webref.ru/css#pseudo-elements)

|            |                 |               |                  |
| ---------- | --------------- | ------------- | ---------------- |
| ::after    | ::first-letter  | ::marker      | ::spelling-error |
| ::backdrop | ::first-line    | ::placeholder |
| ::before   | ::grammar-error | ::selection   |

<hr>

## [**Псевдоклассы** описывают **характеристики элементов**,][2]

такие как динамическое состояние — **нажатая** ссылка, язык кодировки — абзац на **французском** языке и т.д. Они не отображаются в исходном документе и не принадлежат дереву документа DOM (дереву документа принадлежат только сами html-элементы).

Разметка html-страниц создаётся с помощью html-элементов. Для каждого html-элемента существуют css-стили по умолчанию, так называемые стили браузера, например, полужирное начертание и разный размер шрифта заголовков h1-h6, подчёркивание и фиолетовый цвет текста ссылки. Эти стили можно изменять, а также задавать дополнительные, пользовательские, с помощью таблиц стилей.

Без использования псевдоклассов изменить внешний вид по умолчанию и задать индивидуальный для каждого элемента можно только используя селектор — имя тега, класс или идентификатор элемента. Но как быть в случае, когда нужно выделить фоном каждую чётную строку таблицы? Прописывать классы вручную для каждой строки таблицы займёт много времени и значительно увеличит разметку. В такой ситуации на помощь приходит псевдокласс `:nth-child(even)`, и с помощью селектора `tr:nth-child(even)` автоматически устанавливается фон для каждой чётной строки таблицы.

В процессе взаимодействия пользователя со страницей html-элементы приобретают динамические характеристики. Например, когда вы переходите по ссылке, html-элемент `<a>текст ссылки</a>` приобретает следующие свойства (характеристики): когда вы наводите на ссылку, она получает `a:hover`, когда вы уже перешли по ссылке — `a:visited`. Доступ к таким динамическим характеристикам можно получить только с помощью псевдоклассов.

Таким образом, с помощью псевдоклассов можно получить доступ к информации, характеризующей элемент, которая не может быть получена с помощью простых селекторов — `p {css-стили}` или их комбинации — `h1 + p {css-стили}`.

Псевдоклассы делятся на статические, например, `:last-of-type`, и динамические, например, `:hover`, т.е. появляющиеся у элемента в процессе взаимодействия пользователя с веб-страницей. Имена псевдоклассов чувствительны к регистру. Некоторые псевдоклассы взаимоисключающие, в то время как другие могут одновременно применяться к одному элементу.

## Виды псевдоклассов

1. Динамические псевдоклассы
2. Псевдоклассы пользовательского интерфейса
3. Структурные псевдоклассы
4. Целевой псевдокласс :target
5. Языковой псевдокласс :lang()
6. Псевдокласс отрицания :not()
7. Комбинация псевдоклассов

### 1. Динамические псевдоклассы

Выбирают ссылки на странице, которые имеют атрибут `href` и находятся в определенном состоянии, а также некоторые другие элементы:

- `:link` — не посещенная ссылка;
- `:visited` — посещенная ссылка;
- `:focus` — ссылки, а также элементы форм, которые активированы посредством курсора мыши или на которые перешли с помощью клавиатуры (кнопка TAB);
- `:hover` — ссылки, а также другие элементы, стили применяются при наведении пользователем на элемент;
- `:active` — выбирает элемент, активированный пользователем с помощью клика мышки, как правило, это время между нажатием и отпусканием пользователем кнопки мыши. Обычно применяется для ссылок, но может отбирать и другие элементы на странице.

### 2. Псевдоклассы пользовательского интерфейса

Относятся к элементам форм.

- `:disabled` — используется для отбора и стилизации заблокированных для выбора и изменения элементов форм;
- `:enabled` — отбирает не заблокированные для выбора и изменения элементы форм;
- `:checked` — применяется для выбора и стилизации элементов `<input type="radio">`, `<input type="checkbox">`, а также элементов `<option></option>`, находящихся внутри элемента `<select></select>`;
- `:indeterminate` — элементы радио и чекбокс могут быть включены или выключены пользователем. Некоторые из них могут находиться в неопределенном состоянии, к которым и применяется данный псевдокласс.

### 3. Структурные псевдоклассы

Представляют концепцию структурных псевдоклассов, которая позволяет отбирать элементы на основании информации, которая отражена в дереве документа и не может быть получена при помощи простых селекторов или их комбинации.

> Отсчёт начинается с элемента с индексом `1`.

- `:root` — элемент, являющийся корневым в документе;

- `:nth-child()` — элементы на основе их индекса (в порядке очереди) внутри их родительского контейнера.
  <br>Варианты:

  - `li:nth-child(even)` — каждый элемент списка с индексом 2, 4, 6, 8, и т.д.
  - `li:nth-child(odd)` — каждый элемент списка с индексом 1, 3, 5, 7, и т.д.
  - `li:nth-child(3)` — только элемент с индексом 3.
  - `li:nth-child(an+b)` — например, `li:nth-child(3n+1)` выберет первый `(3*0 +1 = 1)`, четвёртый `(3*1 +1 = 4)`, седьмой `(3*2 +1 = 7)` элементы и т.д., причём значение `b` может быть равно нулю;
    `:nth-last-child()` — дочерние элементы на основе их индекса внутри контейнера, при этом отсчёт идёт в обратном порядке, т.е. начиная с последнего элемента. Значениями аргумента могут быть положительные, отрицательные значения, а также ключевые слова `even` или `odd`;

- `:nth-of-type()` — элементы одного типа на основе их индекса внутри контейнера, например, `img:nth-of-type(2n) {float: left;}` установит обтекание по левому краю каждой четной картинке, при условии, что каждая из них не обёрнута другим блоком;

- `:nth-last-of-type()` — элементы одного типа на основе их индекса внутри контейнера, начиная с последнего элемента к первому;

- `:first-child` — элемент, который является первым дочерним элементом некоторого другого элемента;

- `:last-child` — последний дочерний элемент элемента-контейнера;

- `:first-of-type` — первый элемент данного типа среди дочерних элементов родительского элемента-контейнера;

- `:last-of-type` — последний элемент данного типа среди дочерних элементов родительского элемента-контейнера;

- `:only-child` — дочерний элемент, который является единственным дочерним элементов. Работает аналогично с `:first-child:last-child` или `:nth-child(1):nth-last-child(1)`, но с меньшей специфичностью;

- `:only-of-type` — элемент, который является единственным элементом данного типа в родительском элементе;

- `:empty` — элемент, который не содержит ни одного дочернего элемента.

### 4. Целевой псевдокласс `:target`

Некоторые ссылки указывают на местоположение внутри ресурса. Этот тип ссылок заканчивается символом «решетка» `#`, за которым следует идентификатор якоря (так называемый идентификатор фрагмента), например `https://html5book.ru/css3-flexbox/#align-content`. Элемент с идентификатором фрагмента называется **целевым элементом**. С помощью данного псевдокласса можно стилизовать элемент, к которому перешли по ссылке на странице (навигация по странице), а также элементы, которые расположены в одном блоке и при нажатии на кнопку/ссылку сменяются/перемещаются (например, css-слайдер).

В данном примере каждой картинке задан `id`, а каждой ссылке — соответствующий идентификатор якоря. При нажатии на ссылку каждая картинка увеличивается до стопроцентного размера.

```html
<div id="slideshow">
	<img id="one" src="flower-1.jpg" />
	<img id="two" src="flower-2.jpg" />
	<nav>
		<a class="current" href="#one"></a>
		<a href="#two"></a>
	</nav>
</div>
```

```css
#slideshow img {
	transform: scale(0);
}
#slideshow img:target {
	transform: scale(1);
}
```

### 5. Языковой псевдокласс `:lang()`

Данный псевдокласс используется когда в документе содержатся абзацы текста на разных языках. Чтобы браузер различал их, элементу с текстом добавляется атрибут `lang` с кодом языка, например, `lang="fr"`. В результате чего этот элемент может быть стилизован при помощи селектора `p:lang(fr) {css-стили}`.

### 6. Псевдокласс отрицания `:not()`

Функциональный селектор псевдокласса, который принимает в качестве значения простой селектор, а затем отбирает элементы, которые не содержат указанное значение аргумента. Значениями аргументов могут быть только следующие:

- **селекторы элемента**, например, body :not(strong)
- **селекторы класса и идентификатора**, например, p:not(.text)
- **селекторы псевдокласса**, например, ul:not(:first-child)
- **селекторы атрибута**, например, input:not([type="checkbox"])

### 7. Комбинация псевдоклассов

При стилизации элементов возможна комбинация псевдоклассов, например:

- `tr:nth-last-child(even):hover` — добавит стили при наведении каждой чётной строке таблицы (отсчёт в обратном порядке);

- `h2:not(:first-of-type):not(:last-of-type)` — добавит стили для всех элементов данного типа, кроме первого и последнего элемента данного типа.

<hr>

## [transition][3]

Универсальное свойство, которое позволяет одновременно задать значения `transition-property`, `transition-duration`, `transition-timing-function` и `transition-delay`. Устанавливает эффект перехода между двумя состояниями элемента, они могут быть определены с помощью псевдокласса `:hover` или `:active`, а также динамически с помощью JavaScript.

Синтаксис

```css
transition:
	<переход> [,
	<переход>] *;
```

Здесь:

```css
<переход> = [ none | <transition-property> ]
	|| <transition-duration>
	|| <transition-timing-function> || <transition-delay>
```

### [Синтаксис:](https://developer.mozilla.org/ru/docs/Web/CSS/transition#%D1%81%D0%B8%D0%BD%D1%82%D0%B0%D0%BA%D1%81%D0%B8%D1%81)

```css
/* Применить к 1 свойству */
/* имя свойства | длительность */
transition: margin-left 4s;

/* имя свойства | длительность | задержка */
transition: margin-left 4s 1s;

/* имя свойства | длительность | временная функция | задержка */
transition: margin-left 4s ease-in-out 1s;

/* Применить к 2 свойствам */
transition:
	margin-left 4s,
	color 1s;

/* Применить ко всем изменённым свойствам */
transition: all 0.5s ease-out;

/* Глобальные значения */
transition: inherit;
transition: initial;
transition: unset;
```

Пример:

```html
<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>transition</title>
		<style>
			#bar {
				position: absolute; /* Абсолютное позиционирование */
				top: -5.5em;
				right: 5em; /* Положение */
				/* Переход */
				transition: top 1s ease-out 0.5s;
				margin: 0; /* Отступы */
				background: #333; /* Цвет фона */
				padding: 0.5em; /* Поля */
				width: 2em; /* Ширина */
				color: #fff; /* Цвет текста */
				text-align: center; /* Выравнивание по центру */
			}
			#bar:hover {
				top: 0;
			}
		</style>
	</head>
	<body>
		<ul id="bar">
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>&darr;</li>
		</ul>
	</body>
</html>
```

<hr>

## Псевдоэлементы

Псевдоэлемент в CSS — это ключевое слово, добавляемое к селектору, которое позволяет стилизовать определённую часть выбранного элемента. Например, псевдоэлемент [::first-line](https://developer.mozilla.org/ru/docs/Web/CSS/::first-line) может быть использован для изменения шрифта первой строки абзаца.

```css
/* Первая строка каждого элемента <p>. */
p::first-line {
	color: blue;
	text-transform: uppercase;
}
```

> Примечание: В отличие от псевдоэлементов, [псевдоклассы](https://developer.mozilla.org/ru/docs/Web/CSS/Pseudo-classes) могут быть использованы для стилизации элемента на основе его **_состояния_**.

### Синтаксис

```css
selector::pseudo-element {
	property: value;
}
```

В селекторе можно использовать только один псевдоэлемент. Он должен находиться после простых селекторов в выражении.

> Примечание: Как правило, следует использовать двойное двоеточие (`::`) вместо одинарного (`:`). В этом состоит различие между псевдоклассами и псевдоэлементами. Однако, так как это различие не присутствовало в старых версиях спецификации W3C, большинство браузеров поддерживают оба синтаксиса для псевдоэлементов.

<hr>

## Ресурсы:

- [Документация][1]
- [Классификация и описания][2]
- [Transition][3]
  - https://developer.mozilla.org/ru/docs/Web/CSS/transition
- [Проверить предыдущее домашнее задание][4]

[1]: https://webref.ru/css#pseudo-class
[2]: https://html5book.ru/psevdoklassy/
[3]: https://webref.ru/css/transition
[4]: https://github.com/yankovalenko94/Webdev2019/tree/master/Uber_step_2
