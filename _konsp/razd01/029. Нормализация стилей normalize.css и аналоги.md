# 029. Нормализация стилей normalize.css и аналоги

---

## [Проблема таблиц стилей по умолчанию][4]

Каждый браузер поставляется со своей собственной таблицей стилей по умолчанию, которая устанавливает шрифты, размеры текста, насыщенность, цвета, поля и т. д. Эти таблицы стилей по умолчанию важны, поскольку они гарантируют, что веб-страницы будут **разборчивыми, доступными и адаптивными по умолчанию**, даже для HTML-страниц, не имеющих собственного CSS.

Однако эти таблицы стилей браузера представляют собой проблему для разработчиков интерфейсов, поскольку:

1.  Каждый браузер имеет слегка отличающееся и свое собственное мнение о том, какими должны быть настройки по умолчанию. На практике современные браузеры на 99% похожи, но различия в 1% могут привести к неприятным сюрпризам.
2.  Некоторые таблицы стилей браузера реализуют странное, нежелательное поведение, например `-webkit-text-size-adjust`, или в них отсутствуют стили для определенных элементов, например `<abbr>`.
3.  Очень часто разработчики хотят использовать определенный элемент, например `<h1>`или `<ul>`для его семантического значения, но не хотят все связанные стили по умолчанию. Например, поля по умолчанию, прикрепленные к большинству элементов, почти никогда не совпадают с тем, что хочет разработчик. Это иногда делает написание CSS похожим на упражнение «бей крота» с повторным переопределением нежелательных значений по умолчанию.
4.  Наконец, существуют значения по умолчанию, определенные самой спецификацией CSS, которые усложняют понимание поведения CSS, например `box-sizing: content-box`.

![Screenshot of a child container overflowing its parent](https://mattbrictson.com/vite/assets/content-box-CQuKHBed.svg)

_Модель по умолчанию `content-box` дает невероятные результаты, когда задействованы границы и отступы, как показано в этом примере из [MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing)._

## Как это исправить

Чтобы устранить проблемы, присущие таблицам стилей браузера по умолчанию, разработчики интерфейсов традиционно используют три разных подхода: _нормализуют CSS_, _сбрасывают_ его или комбинируют оба подхода.

- Нормализовать

  Применение таблицы стилей _нормализации_ означает исправление несоответствий между браузерами, при этом в целом сохраняя их набор стилей по умолчанию. Другими словами, она охватывает цели таблицы стилей браузера по умолчанию — предоставление разборчивого, доступного и отзывчивого опыта из коробки — при этом делая разработку CSS более предсказуемой в разных браузерах.

  Этот подход популяризировал файл [normalize.css](https://github.com/necolas/normalize.css) Николаса Галлахера .

- Перезагрузить

  С другой стороны, сброс таблицы стилей — это ядерный вариант: он удаляет поля, отступы и стили текста по всем направлениям. Элементы HTML полностью теряют свою визуальную дифференциацию: `<p>` больше не выглядят как абзац, `<h1>` больше не выглядят как заголовок, `<ul>` больше не являются маркированным списком и т. д. Страницы HTML, стилизованные с помощью сброса таблицы стилей, больше не очень разборчивы или доступны; теперь бремя реализации дизайна для добавления этих возможностей обратно лежит на разработчике.

  Этот подход довольно суров, но у него есть свои преимущества, поскольку он полностью устраняет проблему «бей крота» CSS. Он превращает веб в чистый холст, так что CSS, который вы пишете, теперь является чисто аддитивным, а не потенциально конфликтующим с чем-то уже существующим.

  [«Сброс CSS»](https://meyerweb.com/eric/tools/css/reset/) Эрика Мейера стал одним из первых и влиятельных примеров сброса.

- Гибридный

  Перенесемся в 2023 год, и многие фреймворки теперь используют гибридный подход. Tailwind CSS — хороший пример: он поставляется с чем-то под названием [Preflight](https://translate.google.com/website?sl=auto&tl=ru&hl=ru&u=https://tailwindcss.com/docs/preflight), что является комбинацией нормализации и сброса таблицы стилей.

  Идея в том, что вам нужны исправления ошибок и исправление странностей браузера, которые обычно являются частью таблицы стилей нормализации, плюс чистый лист с нулевыми полями, который является работой таблицы стилей сброса. Вместе они обеспечивают разработчикам чистый холст, и без каких-либо сюрпризов браузера.

  В отличие от чистого сброса, эти таблицы стилей с гибридным сбросом часто добавляют некоторые собственные субъективные значения по умолчанию, например, настройки `box-sizing: border-box` или добавления `img { max-width: 100% }`, чтобы сделать изображения более адаптивными.

![Screenshot of a child container overflowing its parent](https://mattbrictson.com/vite/assets/border-box-BXQ1YJqL.svg)

_Благодаря `border-box` CSS-макет становится гораздо более интуитивным._

## Моя (автора статьи) рекомендация

Браузеры улучшились за последние годы, и различия между ними невелики, но все еще есть достаточно сюрпризов, чтобы нормализовать таблицу стилей. Следуя по стопам Preflight от Tailwind, я рекомендую использовать лаконичную, хорошо протестированную библиотеку, например [modern-normalize](https://translate.google.com/website?sl=auto&tl=ru&hl=ru&u=https://github.com/sindresorhus/modern-normalize).

Что касается сброса, большинство стандартных сбросов делают слишком много. Выясните, какие настройки браузера по умолчанию вызывают у вас больше всего проблем, и нацельтесь только на эти элементы и свойства с помощью собственного сброса.

Вот моя типичная таблица стилей сброса в полном объеме:

```css
@import 'modern-normalize';

:root {
	line-height: 1.5;
}

h1,
h2,
h3,
h4,
h5,
figure,
p,
ol,
ul {
	margin: 0;
}

ol[role='list'],
ul[role='list'] {
	padding-inline: 0;
	list-style: none;
}

h1,
h2,
h3,
h4,
h5 {
	font-weight: inherit;
	font-size: inherit;
}

img {
	display: block;
	max-inline-size: 100%;
}
```

> Причины, по которым автор выбрал именно такие настройки, можно прочитать в [статье](https://mattbrictson.com/blog/css-normalize-and-reset#my-recommendation).

---

## Ресурсы:

- [Полный сброс (reset.css)][1]
- [normalize.css][2]
- [modern-normalize][3]
- [Про комбинированный подход][4]

[1]: https://habr.com/ru/articles/45296/
[2]: https://necolas.github.io/normalize.css/
[3]: https://github.com/sindresorhus/modern-normalize
[4]: https://mattbrictson.com/blog/css-normalize-and-reset
